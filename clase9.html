<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clase 9 --- JavaScript Avanzado</title>
    <style></style>
</head>
<body>
    <!-- EJERCICIO # 1 -->
    <!-- EJERCICIO # 3 -->
    <button id="btn">Hacer conexi√≥n FETCH API</button>    
    <script>
        /* EJERCICIO # 4 */
        var btn = document.getElementById('btn')
        btn.addEventListener('click', () => {
            fetch('https://jsonplaceholder.typicode.com/users').then((response) => {
                console.log(response)
                return response.json()                
            }).then((usuarios) => {
                console.log(usuarios)
            })
        })

        /* EJERCICIO # 3 */
        /* var btn = document.getElementById('btn')
        btn.addEventListener('click', () => {
            fetch('archivo.txt').then((response) => {
                console.log('La respuesta fue ' +response.ok)
                if(response.ok){
                    response.text().then((datos) => {
                     console.log('muestro la respuesta : ', datos)   
                    })
                }else{
                    error('Status ' + response.status)
                }
            }).catch(error)
        })
        function error(x){
            console.log('Error...' , x)
        } */


        /* EJERCICIO # 2 */      
            /* let promesa = new Promise((resolve, reject) =>{
                var xhr = new XMLHttpRequest()
                xhr.open('get', 'error.html')
                xhr.addEventListener('load', () =>{
                    if(xhr.status == 200){
                       resolve(xhr.response)
                    }
                })
                xhr.send()
            })
            promesa.then((valor) => { 
                console.log(valor)
            return new Promise((resolve, reject) =>{
                var xhr = new XMLHttpRequest()
                xhr.open('get', 'archivo2.txt')
                xhr.addEventListener('load', () =>{
                    if(xhr.status == 200){
                       resolve(xhr.response + valor)
                    }                   
            })                                 
                xhr.send()
            })
        })              
        .then((valor) =>{
            console.log('Promesa 2 = ' + valor)
        }).catch(() => {
            console.log('Error...')
        }) */
                
            

        /* EJERCICIO # 1 */
        /* function activar(){
            return new Promise((resolve, reject) =>{
                var xhr = new XMLHttpRequest()
                xhr.open('get', 'https://jsonplaceholder.typicode.com/paginai.html')
                xhr.addEventListener('load', () =>{
                    if(xhr.status == 200){
                       resolve(JSON.parse(xhr.response))
                    }else{
                        reject('Algo')
                    }
                })
                xhr.send()
            })
        }
        activar().then((r) =>{
            console.log(r)
        }).catch((a) => {
            console.log(a + ' salio mal')
        }) */
    </script>

    
</body>
</html>